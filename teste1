-- LocalScript para StarterGui

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer
local savedPosition = nil

-- IDs e configs
local PLACE_ID = 109983668079237 -- Steal a Brainrot
local BRAINROT_MIN = 50000000 -- 50m
local BRAINROT_MAX = 60000000 -- 60m

-- Função que busca servidores filtrando brainrots
local function buscarServidores()
    local servers = {}
    local try = pcall(function()
        local url = ("https://games.roblox.com/v1/games/%d/servers/Public?sortOrder=Desc&limit=100"):format(PLACE_ID)
        local response = HttpService:GetAsync(url)
        local data = HttpService:JSONDecode(response)
        for _, server in ipairs(data.data) do
            if server.playerCount < server.maxPlayers then
                -- Supondo que a quantidade de brainrots é armazenada em server.attributes.brainrots
                local brainrots = server.attributes and server.attributes.brainrots or 0
                if brainrots >= BRAINROT_MIN and brainrots <= BRAINROT_MAX then
                    table.insert(servers, {
                        id = server.id,
                        brainrots = brainrots,
                        playerCount = server.playerCount,
                        maxPlayers = server.maxPlayers
                    })
                end
            end
        end
    end)
    return servers
end

-- Função para teleportar para um servidor específico
local function teleportarParaServidor(serverId)
    TeleportService:TeleportToPlaceInstance(PLACE_ID, serverId, player)
end

-- GUI Setup
local screenGui = Instance.new("ScreenGui", player.PlayerGui)
screenGui.Name = "BrainrotGui"

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 500, 0, 350)
frame.Position = UDim2.new(0.5, -250, 0.5, -175)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

local abaServidores = Instance.new("Frame", frame)
abaServidores.Size = UDim2.new(1, 0, 1, 0)
abaServidores.BackgroundTransparency = 1

local abaPosicao = Instance.new("Frame", frame)
abaPosicao.Size = UDim2.new(1, 0, 1, 0)
abaPosicao.Visible = false
abaPosicao.BackgroundTransparency = 1

-- Seta para próxima aba
local setaProxima = Instance.new("TextButton", abaServidores)
setaProxima.Size = UDim2.new(0, 30, 0, 30)
setaProxima.Position = UDim2.new(1, -40, 1, -40)
setaProxima.Text = "→"
setaProxima.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
setaProxima.MouseButton1Click:Connect(function()
    abaServidores.Visible = false
    abaPosicao.Visible = true
end)

-- Seta para voltar
local setaVoltar = Instance.new("TextButton", abaPosicao)
setaVoltar.Size = UDim2.new(0, 30, 0, 30)
setaVoltar.Position = UDim2.new(0, 10, 1, -40)
setaVoltar.Text = "←"
setaVoltar.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
setaVoltar.MouseButton1Click:Connect(function()
    abaServidores.Visible = true
    abaPosicao.Visible = false
end)

-- Botão Salvar Posição
local botaoSalvar = Instance.new("TextButton", abaPosicao)
botaoSalvar.Size = UDim2.new(0, 180, 0, 40)
botaoSalvar.Position = UDim2.new(0.5, -90, 0.3, 0)
botaoSalvar.Text = "Salvar Posição"
botaoSalvar.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
botaoSalvar.MouseButton1Click:Connect(function()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        savedPosition = player.Character.HumanoidRootPart.Position
        botaoSalvar.Text = "Posição Salva!"
        wait(1)
        botaoSalvar.Text = "Salvar Posição"
    end
end)

-- Botão Voltar
local botaoVoltar = Instance.new("TextButton", abaPosicao)
botaoVoltar.Size = UDim2.new(0, 180, 0, 40)
botaoVoltar.Position = UDim2.new(0.5, -90, 0.5, 0)
botaoVoltar.Text = "Voltar"
botaoVoltar.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
botaoVoltar.MouseButton1Click:Connect(function()
    if savedPosition and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = CFrame.new(savedPosition)
    end
end)

-- Lista de servidores
local listaServidores = Instance.new("ScrollingFrame", abaServidores)
listaServidores.Size = UDim2.new(1, -40, 0.7, -40)
listaServidores.Position = UDim2.new(0, 20, 0, 20)
listaServidores.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
listaServidores.CanvasSize = UDim2.new(0, 0, 0, 0)
listaServidores.ScrollBarThickness = 6

-- Botão Buscar Rápido
local botaoBuscarRapido = Instance.new("TextButton", abaServidores)
botaoBuscarRapido.Size = UDim2.new(0, 180, 0, 40)
botaoBuscarRapido.Position = UDim2.new(0.5, -90, 0.85, 0)
botaoBuscarRapido.Text = "Buscar Rápido"
botaoBuscarRapido.BackgroundColor3 = Color3.fromRGB(60, 60, 180)

local function atualizarServidores()
    listaServidores:ClearAllChildren()
    local servers = buscarServidores()
    listaServidores.CanvasSize = UDim2.new(0, 0, 0, #servers*45)
    for i, server in ipairs(servers) do
        local btn = Instance.new("TextButton", listaServidores)
        btn.Size = UDim2.new(1, -10, 0, 40)
        btn.Position = UDim2.new(0, 5, 0, (i-1)*45)
        btn.Text = ("Brainrots: %dm | Jogadores: %d/%d"):format(math.floor(server.brainrots/1000000), server.playerCount, server.maxPlayers)
        btn.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
        btn.MouseButton1Click:Connect(function()
            teleportarParaServidor(server.id)
        end)
    end
end

botaoBuscarRapido.MouseButton1Click:Connect(function()
    local servers = buscarServidores()
    if #servers > 0 then
        -- Entra no servidor com mais brainrots
        table.sort(servers, function(a, b) return a.brainrots > b.brainrots end)
        teleportarParaServidor(servers[1].id)
    else
        botaoBuscarRapido.Text = "Nenhum servidor encontrado!"
        wait(1)
        botaoBuscarRapido.Text = "Buscar Rápido"
    end
end)

-- Atualiza lista ao abrir GUI
atualizarServidores()

-- Recomendo atualizar a lista a cada X segundos
spawn(function()
    while true do
        wait(30)
        if abaServidores.Visible then
            atualizarServidores()
        end
    end
end)
